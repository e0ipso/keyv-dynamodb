<!--
  This file was generated by emdaer

  Its template can be found at .emdaer/README.emdaer.md
-->

<p></p><h1 align="center">
keyv-dynamodb
    <br>
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fd/DynamoDB.png" alt="Keyv DynamoDB logo" title="Keyv DynamoDB logo" width="100">
</h1><p></p>
<p></p><p align="center">
Dynamo DB storage for the Keyv project
</p><p></p>
<hr>


<ul>
<li><a href="#install">Install</a></li>
<li><a href="#why">Why?</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#license">License</a></li>
</ul>

<p>Â· <a href="https://travis-ci.org/e0ipso/keyv-dynamodb/"><img src="https://img.shields.io/travis/e0ipso/keyv-dynamodb.svg?style=flat-square" alt="Travis"></a> <a href="https://coveralls.io/github/e0ipso/keyv-dynamodb/"><img src="https://img.shields.io/coveralls/github/e0ipso/keyv-dynamodb.svg?style=flat-square" alt="Coverage"></a> <a href="https://github.com/emdaer/emdaer"><img src="https://img.shields.io/badge/ðŸ““-documented%20with%20emdaer-F06632.svg?style=flat-square" alt="Documented with emdaer"></a></p>
<h2 id="install">Install</h2>
<ol>
<li><code>yarn add @keyv/dynamodb</code></li>
<li>Create the DynamoDB table using the <code>aws</code> CLI tool. Alternatively you can use
the web dashboard to create the table, just make sure to create the expected
fields. It is important to keep the field names as provided in the example. You
will need to provision the <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ProvisionedThroughput.html">DynamoDB capacities</a>
based on your expected usage. Execute in a terminal:</li>
</ol>
<pre><code># 1. Create the DynamoDb table.
# Add profile or key/secret information if necessary.
aws dynamodb create-table \
    --table-name KeyvStore \
    --attribute-definitions \
        AttributeName=Cid,AttributeType=S \
    --key-schema AttributeName=Cid,KeyType=HASH \
    --provisioned-throughput ReadCapacityUnits=1,WriteCapacityUnits=1
# 2. Enable the TTL attribute. You may need to wait for the table to finish the
# creation process.
# Add profile or key/secret information if necessary.
aws dynamodb update-time-to-live \
    --table-name KeyvStore \
    --time-to-live-specification Enabled=true,AttributeName=Expiration
</code></pre><h2 id="why-">Why?</h2>
<p>This project is interesting when used with the <a href="npmjs.com/package/got">got</a> HTTP
client (or directly using
<a href="npmjs.com/package/cacheable-request">cacheable-request</a>) inside of a Serverless
project. Traditional cache solutions like ElastiCache with Redis will force you
to deploy inside of a VPC. This has negative implications with regards to
performance (via Lambda cold-starts) and scalability (via limited subnet size).
This will allow you to have an application cache backend that doesn&#39;t require a
VPC, since DynamoDB connections from Lambda do not require to deploy into a VPC.</p>
<p>You can also use this project as a stand-alone arbitrary cache back-end, without
<a href="npmjs.com/package/got">got</a> or
<a href="npmjs.com/package/cacheable-request">cacheable-request</a>).</p>
<h2 id="usage">Usage</h2>
<pre><code class="lang-js">const KeyvDynamoDb = require(&#39;@keyv/dynamodb&#39;);

const keyvDynamoDb = new KeyvDynamoDb({
  tableName: &#39;KeyvStore&#39;,
  clientOptions: {
    // Any options here will be passed to the DynamoDB client.
    region: &#39;eu-central-1&#39;,
  },
});
keyvDynamoDb.on(&#39;error&#39;, handleConnectionError);
</code></pre>
<p>Or you can manually create a storage adapter instance and pass it to Keyv:</p>
<pre><code class="lang-js">const Keyv = require(&#39;keyv&#39;);
const KeyvDynamoDb = require(&#39;@keyv/dynamodb&#39;);

const keyvDynamoDb = new KeyvDynamoDb({
  tableName: &#39;KeyvStore&#39;,
  clientOptions: {
    // Any options here will be passed to the DynamoDB client.
    region: &#39;eu-central-1&#39;,
  },
});
const keyv = new Keyv({ store: keyvDynamoDb });
</code></pre>
<h2 id="contributors">Contributors</h2>
<details>
<summary><strong>Contributors</strong></summary><br>
<a title="Engineer and programmer focused on online applications." href="https://github.com/e0ipso">
  <img align="left" src="https://avatars0.githubusercontent.com/u/1140906?s=24">
</a>
<strong>Mateu AguilÃ³ Bosch</strong>
<br><br>
</details>

<h2 id="license">License</h2>
<p>keyv-dynamodb is <a href="./LICENSE">GPL-2.0 licensed</a>.</p>
